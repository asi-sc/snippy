# RUN: llvm-snippy %s -march=riscv64-unknown-elf \
# RUN:   -num-instrs=100 \
# RUN:   -dump-layout=true -riscv-disable-misaligned-access \
# RUN: |& FileCheck %s --dump-input fail

include:
  - Inputs/sections.yaml
  - Inputs/default-opcodes.yaml
  - memory-modes.yaml

# CHECK: Memory access 0:
# CHECK-NEXT: Memory range:
# CHECK-NEXT:   Weight: 1
# CHECK-NEXT:   Start: 2147491840
# CHECK-NEXT:   Size: 4096
# CHECK-NEXT:   Stride: 16
# CHECK-NEXT:   FirstOffset: 1
# CHECK-NEXT:   LastOffset: 2

# CHECK: Memory access 1:
# CHECK-NEXT: Memory range:
# CHECK-NEXT:   Weight: 1
# CHECK-NEXT:   Start: 2147500032
# CHECK-NEXT:   Size: 512
# CHECK-NEXT:   Stride: 8
# CHECK-NEXT:   FirstOffset: 4
# CHECK-NEXT:   LastOffset: 6

# CHECK: Memory access 2:
# CHECK-NEXT: Memory range:
# CHECK-NEXT:   Weight: 1
# CHECK-NEXT:   Start: 2147483648
# CHECK-NEXT:   Size: 1024
# CHECK-NEXT:   Stride: 4
# CHECK-NEXT:   FirstOffset: 1
# CHECK-NEXT:   LastOffset: 1

# CHECK: Memory access 3:
# CHECK-NEXT: Memory eviction:
# CHECK-NEXT:   Weight: 1
# CHECK-NEXT:   Mask:  0x3c0000
# CHECK-NEXT:   Fixed: 0x80000000

# CHECK: Memory access 4:
# CHECK-NEXT: Memory eviction:
# CHECK-NEXT:   Weight: 1
# CHECK-NEXT:   Mask:  0xbe000
# CHECK-NEXT:   Fixed: 0x80001000

# CHECK: Memory access 5:
# CHECK-NEXT: Memory addresses:
# CHECK-NEXT:  Weight: 1
# CHECK-NEXT:  Ordered: 1
# CHECK-NEXT:  Plain:
# CHECK-NEXT:   - Addr: 0x80200000
# CHECK-NEXT:     Access-size: 16
# CHECK-NEXT:   - Addr: 0x80201234
# CHECK-NEXT:     Access-size: 16
# CHECK-NEXT:   - Addr: 0x802020bc
# CHECK-NEXT:     Access-size: 16

# CHECK: Memory access 6:
# CHECK-NEXT: Memory addresses:
# CHECK-NEXT:  Weight: 1
# CHECK-NEXT:  Ordered: 0
# CHECK-NEXT:  Plain:
# CHECK-NEXT:   - Addr: 0x80200050
# CHECK-NEXT:     Access-size: 12

# CHECK: Memory access 7:
# CHECK-NEXT: Memory addresses:
# CHECK-NEXT:  Weight: 1
# CHECK-NEXT:  Ordered: 1
# CHECK-NEXT:  Plain:
# CHECK-NEXT:   - Addr: 0x80200f00
# CHECK-NEXT:     Access-size: 16
